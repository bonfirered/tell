(function(e){function t(e,t,n){if(e!==null&&arguments.length==3){if(e.addEventListener){e.addEventListener(t,n,false)}else if(e.attachEvent){e.attachEvent("on"+t,n)}}}function n(e,t,n){if(e!==null&&arguments.length==3){if(e.removeEventListener){e.removeEventListener(t,n,false)}else if(e.detachEvent){e.detachEvent("on"+t,n)}}}if(typeof window.fancyScroll=="function"){return}window.fancyScroll=function(n){this.settings={scrollMode:"vertical",startSection:"",hashChangeScroll:false,easingRate:15,easingTime:1e3,easingFunction:"easeOutCubic",topButton:true,topButtonText:"Top",topButtonClass:"scroll-topButton",topButtonShowAfter:"0px",topButtonTarget:document.body,topButtonHash:"#/",onScroll:function(){},onScrollEnd:function(){},onScrollStart:function(){}};if(n&&typeof n=="object"){for(var r in this.settings){if(n[r]!=e)this.settings[r]=n[r]}}this.tmp=new Object;this.tmp.horizontal=this.settings.scrollMode=="horizontal";this.tmp.vertical=!this.tmp.horizontal;this.map=new Array;var i=document.getElementsByTagName("div");for(var s=0;s<i.length;s++){if(i[s].className.indexOf("scroll-background")!=-1){this.map.push({self:i[s],top:this.getAbsolutePosition(i[s])[1],left:this.getAbsolutePosition(i[s])[0],height:i[s].offsetHeight,width:i[s].offsetWidth,offset:parseInt(i[s].getAttribute("offset")||0),limit:parseInt(i[s].getAttribute("limit")||0),position:this.getBackgroundPosition(i[s])})}}var o=function(e){var t,n;var r=window.pageXOffset||document.documentElement.scrollLeft;var i=window.pageYOffset||document.documentElement.scrollTop;for(var s=0;s<this.map.length;s++){var o=this.map[s];if(this.tmp.horizontal){n=o.offset*(r-o.left)/o.width;if(o.limit>0){if(n>o.limit)n=o.limit}else{if(o.limit!=0&&n<o.limit)n=o.limit}t=o.position.x+n+"px "+o.position.y+"px"}else{n=o.offset*(i-o.top)/o.height;if(o.limit>0){if(n>o.limit)n=o.limit}else{if(o.limit!=0&&n<o.limit)n=o.limit}t=o.position.x+"px "+(o.position.y+n)+"px"}o.self.style.backgroundPosition=t}if(this.tmp.topButton){this.tmp.topButton.style.visibility="hidden";if(this.tmp.horizontal?r:i>parseInt(this.settings.topButtonShowAfter,10)){this.tmp.topButton.style.visibility="visible"}}if(typeof this.settings.onScroll=="function"){this.settings.onScroll.call(this,r,i)}};t(window,"scroll",this.setScope(o));var u=function(e){clearInterval(this.tmp.scroll_timer);if(typeof this.settings.onScrollEnd=="function"){this.settings.onScrollEnd.call(this)}};if(/firefox/i.test(navigator.userAgent)){t(window,"DOMMouseScroll",this.setScope(u))}else{t(window,"mousewheel",this.setScope(u))}this.tmp.hash_support=true;if(window.navigator.appName.indexOf("Microsoft")!=-1){if(/MSIE (\d+\.?\d+)/.exec(window.navigator.userAgent)!=null){this.tmp.hash_support=parseFloat(RegExp.$1)<8?false:true}}var a=function(){if(/#\/([\w-]+)/.exec(location.hash)!=null){this.scroll(RegExp.$1)}};if(this.settings.hashChangeScroll&&this.tmp.hash_support){this.tmp.hashchange=this.setScope(a);t(window,"hashchange",this.tmp.hashchange)}if(this.settings.topButton){this.tmp.topButton=document.createElement("a");this.tmp.topButton.className=this.settings.topButtonClass;this.tmp.topButton.href=this.settings.topButtonHash;this.tmp.topButton.appendChild(document.createTextNode(this.settings.topButtonText));this.addScroll(this.tmp.topButton,this.settings.topButtonTarget);this.tmp.topButton.style.visibility="hidden";document.body.appendChild(this.tmp.topButton)}if(this.settings.startSection){if(/^#\/\w+/.test(this.settings.startSection)){this.changeURLHash(this.settings.startSection)}this.setScope(a)()}};fancyScroll.prototype.scroll=function(e){if(typeof e=="string"){e=document.getElementById(e)}if(typeof this.settings.onScrollStart=="function"){this.settings.onScrollStart.call(this,e)}if(e===null)return;if(this.tmp.horizontal){var t=window.pageXOffset||document.documentElement.scrollLeft;var n=this.getAbsolutePosition(e)[0]}else{var t=window.pageYOffset||document.documentElement.scrollTop;var n=this.getAbsolutePosition(e)[1]}var r,i=0;if(typeof this.settings.easingFunction=="function"){r=this.settings.easingFunction}else{r=fancyScroll.easeFX[this.settings.easingFunction]}var s=function(){if(i<this.settings.easingTime){i+=this.settings.easingRate;if(this.tmp.horizontal){window.scroll(r(i,t,n-t,this.settings.easingTime),0)}else{window.scroll(0,r(i,t,n-t,this.settings.easingTime))}}else{clearInterval(this.tmp.scroll_timer);var e=0,s=new Array,o;while(e<this.map.length){o=this.tmp.horizontal?this.map[e].left:this.map[e].top;if(o==n){s.push(this.map[e])}e++}if(typeof this.settings.onScrollEnd=="function"){this.settings.onScrollEnd.call(this,s[0].self.parentNode,s)}}};clearInterval(this.tmp.scroll_timer);this.tmp.scroll_timer=setInterval(this.setScope(s),this.settings.easingRate)};fancyScroll.prototype.addScroll=function(e,n){function i(e,n){if(typeof e=="string"){e=document.getElementById(e)}t(e,"click",r.setScope(function(e){r.scroll(n);e=e||window.event;if(e.preventDefault){e.preventDefault()}e.returnValue=false;location.hash="#/"+(n.substr?n:n.id)}))}if(this.settings.hashChangeScroll&&this.tmp.hash_support){return this}var r=this;if(e instanceof Array&&n instanceof Array){for(var s=0;s<e.length;s++){i(e[s],n[s])}}else{i(e,n)}return r};fancyScroll.prototype.changeURLHash=function(e){if(this.tmp.hashchange){n(window,"hashchange",this.tmp.hashchange);window.location.hash=e;clearTimeout(this.tmp.hashchange_timer);this.tmp.hashchange_timer=setTimeout(this.setScope(function(){t(window,"hashchange",this.tmp.hashchange)}),100)}else{window.location.hash=e}};fancyScroll.prototype.updateMap=function(){for(var e=0;e<this.map.length;e++){var t=this.map[e];t.left=this.getAbsolutePosition(t.self)[0];t.top=this.getAbsolutePosition(t.self)[1];t.height=t.self.offsetHeight;t.width=t.self.offsetWidth}};fancyScroll.prototype.setScope=function(e){var t=this;return function(){e.apply(t,Array.prototype.slice.call(arguments))}};fancyScroll.prototype.getAbsolutePosition=function(e){if(e==null){return[0,0]}else{var t=e.offsetLeft;var n=e.offsetTop;var r=arguments.callee(e.offsetParent);return[t+r[0],n+r[1]]}};fancyScroll.prototype.getBackgroundPosition=function(e){var t="0 0";if(typeof e=="string"){e=document.getElementById(e)}if(window.getComputedStyle){t=window.getComputedStyle(e,null).backgroundPosition}else if(e.currentStyle){if(e.currentStyle.backgroundPosition){t=e.currentStyle.backgroundPosition}else if(e.currentStyle.backgroundPositionX){t=e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY}}var n=parseInt(t.split(" ")[0],10);var r=parseInt(t.split(" ")[1],10);return{x:isNaN(n)?0:n,y:isNaN(r)?0:r}};fancyScroll.easeFX={easeInElastic:function(e,t,n,r){var i=1.70158;var s=0;var o=n;if(e==0)return t;if((e/=r)==1)return t+n;if(!s)s=r*.3;if(o<Math.abs(n)){o=n;var i=s/4}else var i=s/(2*Math.PI)*Math.asin(n/o);return-(o*Math.pow(2,10*(e-=1))*Math.sin((e*r-i)*2*Math.PI/s))+t},easeOutElastic:function(e,t,n,r){var i=1.70158;var s=0;var o=n;if(e==0)return t;if((e/=r)==1)return t+n;if(!s)s=r*.3;if(o<Math.abs(n)){o=n;var i=s/4}else var i=s/(2*Math.PI)*Math.asin(n/o);return o*Math.pow(2,-10*e)*Math.sin((e*r-i)*2*Math.PI/s)+n+t},easeInOutElastic:function(e,t,n,r){var i=1.70158;var s=0;var o=n;if(e==0)return t;if((e/=r/2)==2)return t+n;if(!s)s=r*.3*1.5;if(o<Math.abs(n)){o=n;var i=s/4}else var i=s/(2*Math.PI)*Math.asin(n/o);if(e<1)return-.5*o*Math.pow(2,10*(e-=1))*Math.sin((e*r-i)*2*Math.PI/s)+t;return o*Math.pow(2,-10*(e-=1))*Math.sin((e*r-i)*2*Math.PI/s)*.5+n+t},easeInBack:function(t,n,r,i,s){if(s==e)s=1.70158;return r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(t,n,r,i,s){if(s==e)s=1.70158;return r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(t,n,r,i,s,o){if(o==e)o=1.70158;if((n/=s/2)<1)return i/2*n*n*(((o*=1.525)+1)*n-o)+r;return i/2*((n-=2)*n*(((o*=1.525)+1)*n+o)+2)+r},easeInQuint:function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},easeOutQuint:function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,r){if((e/=r/2)<1)return n/2*e*e*e*e*e+t;return n/2*((e-=2)*e*e*e*e+2)+t},easeInCubic:function(e,t,n,r){e/=r;return n*e*e*e+t},easeOutCubic:function(e,t,n,r){e/=r;e--;return n*(e*e*e+1)+t},easeInOutCubic:function(e,t,n,r){e/=r/2;if(e<1)return n/2*e*e*e+t;e-=2;return n/2*(e*e*e+2)+t},linear:function(e,t,n,r){return n*e/r+t}}})()